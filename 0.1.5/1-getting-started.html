<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Getting Started</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css" /><div style="visibility: hidden;"><div class="klipse" data-external-libs="https://raw.githubusercontent.com/Microsoft/same-ish/0.1.5/src">(ns same.klipse
          (:require-macros [same :refer [with-comparator]])
          (:require [same :refer [ish? zeroish? not-zeroish? set-comparator!]]
                    [same.compare :refer [compare-ulp]]
                    [same.ish :refer [default-comparator]]))</div></div><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">same/ish</span> <span class="project-version">0.1.5</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="1-getting-started.html"><div class="inner"><span>Getting Started</span></div></a></li><li class="depth-1 "><a href="2-custom-comparators.html"><div class="inner"><span>Custom Comparators</span></div></a></li><li class="depth-1 "><a href="3-test-output.html"><div class="inner"><span>Test Output</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 "><a href="same.html"><div class="inner"><span>same</span></div></a></li><li class="depth-1 "><a href="same.compare.html"><div class="inner"><span>same.compare</span></div></a></li><li class="depth-1 "><a href="same.core.html"><div class="inner"><span>same.core</span></div></a></li><li class="depth-1 "><a href="same.diff.html"><div class="inner"><span>same.diff</span></div></a></li><li class="depth-1 "><a href="same.ish.html"><div class="inner"><span>same.ish</span></div></a></li><li class="depth-1 "><a href="same.platform.html"><div class="inner"><span>same.platform</span></div></a></li></ul></div><div class="document" id="content"><p id="klipse-loader-wrapper">Click <a id="klipse-loader" href="javascript:void(0)">here</a> to make these examples interactive with ClojureScript.</p><div class="doc"><div class="markdown"><h1><a href="#getting-started" id="getting-started"></a>Getting Started</h1>
<h2><a href="#comparing-values" id="comparing-values"></a>Comparing values</h2>
<p>To compare two doubles, instead of using <code>=</code> or <code>==</code>, use <code>ish?</code>:</p>
<pre><code class="language-clojure">(ns demo.ish-test
  (:require [clojure.test :refer :all]
            [same :refer [ish?]]))

(deftest ish-test
  (let [one-ish (-&gt; 1.0 (/ 49) (* 49))]
    (is (==   one-ish 1.0)) ;; fails
    (is (ish? one-ish 1.0)))) ;; succeeds!

(ish-test)
</code></pre>
<p>You can also compare data structures, and they will be compared element-wise, using <code>ish?</code> for floating point types, <code>==</code> for other numbers, and <code>=</code> for anything else:</p>
<pre><code class="language-clojure">(ns demo.matrix-test
  (:require [clojure.core.matrix :as m]
            [clojure.test :refer :all]
            [same :refer [ish?]]))

(deftest matrix-test
  (is (ish? [[-17/24   7/24  1/24]
             [  1/8    1/8  -1/8]
             [ 29/24 -19/24 11/24]]
            (m/inverse [[1 4 1]
                        [5 9 2]
                        [6 5 3]]))))
</code></pre>
<p>Notice that the expected value uses <code>Ratio</code>s, but since the result of the matrx inverse is doubles, they are compared taking rounding errors into account.</p>
<h2><a href="#comparing-to-zero" id="comparing-to-zero"></a>Comparing to zero</h2>
<p>Comparing to zero is a special case, because relative error doesnâ€™t work anymore, so we have to use absolute differences. Results near zero are often the result of subtracting similar numbers, and the rounding error is proportional to the size of these original numbers, not the result.</p>
<p>A function is also provided for comparing numbers to zero, where you can specify the size of the largest number used in the subtraction, so that the absolute difference can be set appropriately:</p>
<pre><code class="language-clojure">(is (zeroish? (something 123 1e6)
              :scale 10000))
</code></pre>
<p>There is also a negated version <code>not-zeroish?</code> for convenience, which is equivalent to <code>(not (zeroish? ...))</code>.</p>
</div></div></div><script>window.klipse_settings = {
    selector: '.klipse,.klipse',
    codemirror_options_in: {
    lineWrapping: true,
    autoCloseBrackets: true
    },
    codemirror_options_out: {
    lineWrapping: true
    },
    };

    if (/same|same\..*/) { window.klipse_settings.clojure_cached_macro_ns_regexp =  /same|same\..*/;}
if (/same|same\..*/) { window.klipse_settings.clojure_cached_ns_regexp =  /same|same\..*/;}
if (/same|same\..*/) { window.klipse_settings.clojure_bundled_ns_ignore_regexp =  /same|same\..*/;}
if ('./cache-cljs') { window.klipse_settings.cached_ns_root =  './cache-cljs';}
</script><script>
    function klipseLocalStorageEnabled() {
        var mod = 'modernizr';
        try {
          localStorage.setItem(mod, mod);
          localStorage.removeItem(mod);
          return true;
        } catch (e) {
          return false;
        }
     }
     function klipseLoad() {
      if (klipseLocalStorageEnabled()) { sessionStorage.setItem('klipse', true);}
      $('#klipse-loader-wrapper').remove();
      var s = document.createElement('script');
      s.setAttribute('src','https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js');
      document.head.appendChild(s);
      }
    if(!false) {
      klipseLoad();
    } else {
      if((klipseLocalStorageEnabled() && sessionStorage.getItem('klipse')) || window.location.search.match(/klipse=1/)) {
        klipseLoad();
      } else {
        $('#klipse-loader').click(function(){
        klipseLoad();
       });
      }
    }
    </script></body></html>